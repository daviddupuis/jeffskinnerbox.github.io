<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:og="http://ogp.me/ns#"
      xmlns:fb="https://www.facebook.com/2008/fbml">
<head>
    <title>SendEmail as a Messaging Tool for the Raspberry Pi - Jeff's Skinner Box</title>
    <!-- Using the latest rendering mode for IE -->
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <link href="/favicon.ico" rel="icon">

    <!-- Open Graph tags -->
            <meta property="og:type" content="article"/>
            <meta property="og:title" content="SendEmail as a Messaging Tool for the Raspberry Pi"/>
            <meta property="og:url" content="/posts/2012/Nov/10/sendemail-as-a-messaging-tool-for-the-raspberry-pi/"/>
            <meta property="og:description" content="SendEmail is a lightweight, completely command line based, SMTP email agent. I envision using this utility to email status reports/messages when generated by my Raspberry Pi."/>

    <!-- Bootstrap -->
        <link rel="stylesheet" href="/theme/css/bootstrap.flatly.min.css" type="text/css"/>

    <!-- Font Awesome and Google Fonts -->
    <link href="/theme/css/font-awesome.min.css" rel="stylesheet">
    <link href='http://fonts.googleapis.com/css?family=Knewave' rel='stylesheet' type='text/css'>

    <link href="/theme/css/pygments/native.css" rel="stylesheet">
        <link href="/theme/css/typogrify.css" rel="stylesheet">
    <link rel="stylesheet" href="/theme/css/style.css" type="text/css"/>

</head>

<body>
<div class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="container">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-ex1-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a href="/" style="font-family: Knewave, cursive; font-size: 48px; color: #FFFFFF">
Jeff's Skinner Box&nbsp;            </a>
        </div>
        <div class="collapse navbar-collapse navbar-ex1-collapse">
            <ul class="nav navbar-nav">
                         <li><a href="/pages/about-me.html">
                             About&nbsp;Me
                          </a></li>
                    <li><a href="/index.html">Blog</a></li>
                    <li><a href="/pages/open-notebook.html">Open Notebook</a></li>
            </ul>
            <ul class="nav navbar-nav navbar-right">
                <li><a href="/archives.html"><i class="fa fa-th-list"></i><span class="icon-label">Archives</span></a></li>
            </ul>
        </div>
        <!-- /.navbar-collapse -->
    </div>
        <!-- GitHub Ribbon - https://github.com/blog/273-github-ribbons -->
        <a href="https://github.com/jeffskinnerbox/jeffskinnerbox.github.com" target="_blank">
            <img style="position: absolute; top: 0; left: 0; border: 0;" src="https://github-camo.global.ssl.fastly.net/82b228a3648bf44fc1163ef44c62fcc60081495e/68747470733a2f2f73332e616d617a6f6e6177732e636f6d2f6769746875622f726962626f6e732f666f726b6d655f6c6566745f7265645f6161303030302e706e67" alt="Fork me on GitHub" data-canonical-src="https://s3.amazonaws.com/github/ribbons/forkme_left_red_aa0000.png">
        </a>
</div> <!-- /.navbar -->

<div class="container">
    <div class="row">
        <div class="col-sm-9">

    <section id="content">
        <article>
            <header class="page-header">
                <h1>
                    <a href="/posts/2012/Nov/10/sendemail-as-a-messaging-tool-for-the-raspberry-pi/"
                       rel="bookmark"
                       title="Permalink to SendEmail as a Messaging Tool for the Raspberry Pi">
                        SendEmail as a Messaging Tool for the Raspberry&nbsp;Pi
                    </a>
                </h1>
            </header>
            <div class="entry-content">
                <div class="panel">
                    <div class="panel-body">
<footer class="post-info">
    <span class="published">
        <i class="fa fa-calendar"></i><time datetime="2012-11-10T00:01:00"> Saturday  November 10, 2012</time>
    </span>



&nbsp;&nbsp;&nbsp;
<i class="fa fa-tags fa-lg"></i>
    <a class="btn btn-default btn-xs" href="/tag/raspberry-pi/">Raspberry Pi</a>
    
</footer><!-- /.post-info -->                    </div>
<!-- Repost button -->
<!-- For more information - http://www.repost.us/ -->
<a class='rpuRepostUsButton' href='https://secure.repost.us/syndicate/create'>
    <img alt='Repost This' title='Repost this article to your website' src='http://static.1.rp-api.com/buttons/repostus_bttn_shrt_embed.png'/>
</a>                </div>
                <p>In the projects I envision for the future, I&#8217;ll be using my Raspberry Pi (RPi) as a gateway/server/controller for several other devices.  There is likely to be a need to generate status reports/messages and mail them out. It could be as simple as a notification that the deck lights have been turned-on. I don&#8217;t need a full fledged mail client on the RPi to receive mail or manage a mailbox, just a command line utility to send email.  Also, I would like to send short text messages via (<a href="http://en.wikipedia.org/wiki/Short_Message_Service"><span class="caps">SMS</span></a>) to my cell phone.  Linux does have a nice solution for&nbsp;this.</p>
<p>You do need an established email account with some email provider. I want to keep my personal email and my RPi&#8217;s email separate  so I setup a special email account on gmail.  This will be used only by my Raspberry Pi&#8217;s (or other intelligent devices). There <a href="http://www.e-eeasy.com/SMTPServerList.aspx">exist</a> some <a href="http://searchnetworking.techtarget.com/definition/open-relay">open <span class="caps">SMTP</span> relay</a> mail servers (mail servers that will not require a login nor a password) but many open mail relays have become unpopular and closed due to their exploitation by spammers and worms.
<h2>SendEmail</h2>
<a href="http://www.debianadmin.com/how-to-sendemail-from-the-command-line-using-a-gmail-account-and-others.html#more-706">SendEmail</a> is a lightweight, completely command line based, <a href="http://computer.howstuffworks.com/e-mail-messaging/email3.htm"><span class="caps">SMTP</span> email agent</a>. It is written in Perl and designed to be used on the command line, in bash scripts, Perl programs, within web sites,&nbsp;etc.</p>
<p>I installed SendEmail on my RPi via this&nbsp;command:</p>
<div class="codehilite" style="background: #f0f3f3"><pre style="line-height: 125%">sudo apt-get install sendemail
</pre></div>


<h2>Testing&nbsp;sendEmail</h2>

<p>When I ran sendEmail the first time, it complained about some missing libraries.  I installed the missing libraries and this cleared the error.  Clearly, the sendEmail package needs some work since this dependency should have been taken care of by <code>apt-get</code>.</p>
<p>I ran it again using this&nbsp;command:</p>
<div class="codehilite" style="background: #f0f3f3"><pre style="line-height: 125%">sendEmail -f pi@RedRPi -t &lt;my_user_name&gt;@verzion.net -u &quot;Test Email from RedRPi&quot; -m &quot;My test message.&quot; -s smtp.gmail.com:587  -o tls=yes -xu &lt;my_user_name&gt; -xp &lt;my_password&gt;
</pre></div>


<p>With this, sendEmail threw an error&nbsp;message:</p>
<div class="codehilite" style="background: #f0f3f3"><pre style="line-height: 125%">invalid SSL_version specified at /usr/share/perl5/IO/Socket/SSL.pm line 332
</pre></div>


<p>I did a web search and found that this is a reported bug within sendEmail (bummer), but I also found a simple <a href="http://unix.stackexchange.com/questions/53065/invalid-ssl-version-specified-at-usr-share-perl5-io-socket-ssl-pm-line-332">patch</a> for the problem (lucky break).  I applied the fix, executed the command again, and succeeded in sending the&nbsp;email.</p>
<p>One of the key parameter used here is the <a href="http://en.wikipedia.org/wiki/SMTP"><span class="caps">SMTP</span></a> <a href="http://www.xeams.com/smtprelay.htm">mail relay</a> specified in  &#8221;<code>-s smtp.gmail.com:587</code><span class="dquo">&#8220;</span>.  In this case, Gmail uses port 587 for relay email.  The default port to use is 25 but not all email servers use this&nbsp;port.</p>
<p>Another key parameter is &#8220;<code>-o tls=yes</code><span class="dquo">&#8220;</span>. This specifies that the <a href="http://en.wikipedia.org/wiki/Transport_Layer_Security">Transport Layer Security (<span class="caps">TLS</span>)</a> protocol will be used to provide communication security over the Internet.  This is important since your including a plain-text password in the command.<sup id="cite_ref-1"></sup>
<h2><span class="caps">SMS</span>&nbsp;Messaging</h2>
Another messaging mechanism that I plan to use is Short Message Service (<span class="caps">SMS</span>).  To do this, you can use a <a href="http://en.wikipedia.org/wiki/SMS_gateway"><span class="caps">SMS</span> gateway</a> which will transform an email into an <span class="caps">SMS</span> message.  The down side is that there isn&#8217;t a single gateway but <a href="http://en.wikipedia.org/wiki/List_of_SMS_gateways">one for each of the cellular carries</a>.</p>
<p>Here is an example for <span class="caps">AT</span>&amp;T cell&nbsp;phones:</p>
<div class="codehilite" style="background: #f0f3f3"><pre style="line-height: 125%">sendEmail -f pi@RedRPi -t &lt;cell_phone_number&gt;@txt.att.net -u &quot;Test Email from RedRPi&quot; -m &quot;My test message.&quot; -s smtp.gmail.com:587  -o tls=yes -xu &lt;my_user_name&gt; -xp &lt;my_password&gt;
</pre></div>
            </div>
            <!-- /.entry-content -->
        </article>
    </section>

        </div>
        <div class="col-sm-3 well well-sm" id="sidebar">

<aside>
    <section>
        <ul class="list-group list-group-flush">
                <div style="text-align: center;">
                    <h3><a href="/pages/about-me.html" style="font-family: Knewave, cursive; font-size: 18;">My Electronics Projects And Other Diversions</a>
                    <img class="img-rounded" src="/extra/frustrated-engineer.jpg" alt="Side Bar Picture" height="100%" width="100%">
                </div>

            <li class="list-group-item"><a href="/categories.html"><h4><i class="fa fa-folder-open fa-lg"></i><span class="icon-label">Categories</span></h4></a>
            </li>

            <li class="list-group-item"><a href="/tags.html"><h4><i class="fa fa-tags fa-lg"></i><span class="icon-label">Tags</span></h4></a>
            </li>    

            <li class="list-group-item"><a href="/index.html"><h4><i class="fa fa-file-text fa-lg"></i><span class="icon-label">Recent Posts</span></h4></a>
            </li>

            <li class="list-group-item"><a href="/pages/open-notebook.html"><h4><i class="fa fa-book fa-lg"></i><span class="icon-label">Open Notebook</span></h4></a>

            <li class="list-group-item"><h4><i class="fa fa-external-link-square fa-lg"></i><span class="icon-label">Links</span></h4>
                <ul class="list-group" id="links">
                    <li class="list-group-item">
                        <a href="/pages/scratch-pad.html" target="_blank">
                            Scratch Pad
                        </a>
                    </li>
                    <li class="list-group-item">
                        <a href="/pages/linux-python-packages-for-my-raspberry-pi.html" target="_blank">
                            RPi Packages
                        </a>
                    </li>
                    <li class="list-group-item">
                        <a href="/pages/reference-page.html" target="_blank">
                            Reference Page
                        </a>
                    </li>
                    <li class="list-group-item">
                        <a href="/pages/vim-cheat-sheet.html" target="_blank">
                            Vim Cheat Sheet
                        </a>
                    </li>
                </ul>
                </li>

                <li class="list-group-item"><h4><i class="fa fa-group fa-lg"></i><span class="icon-label">Social Media</span></h4>
                  <ul class="list-group" id="social">
                    <li class="list-group-item"><a href="https://github.com/jeffskinnerbox" target="_blank"><i
                            class="fa fa-github-square fa-lg"></i> Github
                    </a></li>
                    <li class="list-group-item"><a href="https://twitter.com/jeffskinnerbox" target="_blank"><i
                            class="fa fa-twitter-square fa-lg"></i> Twitter
                    </a></li>
                    <li class="list-group-item"><a href="https://linkedin.com/in/jeffreyirland" target="_blank"><i
                            class="fa fa-linkedin-square fa-lg"></i> Linkedin
                    </a></li>
                  </ul>
            </li>

            <li class="list-group-item"><a href="/pages/this-blog-is-powered-by.html"><h4><i class="fa fa-rocket fa-lg"></i><span class="icon-label">This Blog Powered By</span></h4></a>

        </ul>
    </section>

</aside>        </div>
    </div>
</div>
<footer>
   <div class="container">
      <hr>
      <div class="row">
         <div class="col-xs-10">This Blog Powered By 
            <a href="http://docs.getpelican.com/" target="_blank">Pelican</a>,
            <a href="http://getbootstrap.com" target="_blank">Bootstrap</a>, And
            <a href="/pages/this-blog-is-powered-by.html" target="_blank">Other Things</a>.
            <p>
            <a href="http://opensource.org/">
                <img src="/images/logos/open_source_logo.png" alt="Open Source Logo" title="The Open Source Initiative (OSI) is a non-profit corporation with global scope formed to educate about and advocate for the benefits of open source, and to build bridges among different constituencies in the open source community. The OSI maintains the Open Source Definition and the list of Open Source Initiative-approved licenses." height="40px" width="40px">
            </a>
            <small>
                All my work is
                <a href="http://opensource.org/licenses/MIT/" target="_blank">MIT licensed, Open, and Free</a>,
                except where indicated otherwise.
            </small>
            </p>
         </div>
         <div class="col-xs-2"><p class="pull-right"><i class="fa fa-arrow-up"></i> <a href="#">Back to top</a></p></div>
      </div>
   </div>
</footer>
<script src="http://code.jquery.com/jquery.js"></script>

<!-- Include all compiled plugins (below), or include individual files as needed -->
<script src="/theme/js/bootstrap.min.js"></script>

<!-- Enable responsive features in IE8 with Respond.js (https://github.com/scottjehl/Respond) -->
<script src="/theme/js/respond.min.js"></script>

    <script type="text/javascript">
        $(document).ready(function () {
            if (!window.jXHR) {
                var jxhr = document.createElement('script');
                jxhr.type = 'text/javascript';
                jxhr.src = '/theme/js/jXHR.js';
                var s = document.getElementsByTagName('script')[0];
                s.parentNode.insertBefore(jxhr, s);
            }

            github.showRepos({
                user: 'jeffskinnerbox',
                count: 5,
                skip_forks: true,
                target: '#gh_repos'
            });
        });
    </script>
    <script src="/theme/js/github.js" type="text/javascript"></script>
</body>
</html>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:og="http://ogp.me/ns#"
      xmlns:fb="https://www.facebook.com/2008/fbml">
<head>
    <title>Configuration Utilities for XBee Radios - Jeff's Skinner Box</title>
    <!-- Using the latest rendering mode for IE -->
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <link href="http://jeffskinnerbox.me/favicon.ico" rel="icon">

    <!-- Open Graph tags -->
            <meta property="og:type" content="article"/>
            <meta property="og:title" content="Configuration Utilities for XBee Radios"/>
            <meta property="og:url" content="http://jeffskinnerbox.me/posts/2013/Jan/30/configuration-utilities-for-xbee-radios/"/>
            <meta property="og:description" content="In this post, I provide a python utility thace can be used to configure and test Xbee radios. Its a command interpretors used to send AT Commands to the XBee with output is color coded to help distinguish user input, from XBee radio output, and from interpretors output."/>

        <meta content='4b4ba976784eb9a97125d9e26149a667' name='RepostUsAPIKey' />
        <script src='http://1.rp-api.com/rjs/repostus.js' type='text/javascript'></script>

    <!-- Bootstrap -->
        <link rel="stylesheet" href="http://jeffskinnerbox.me/theme/css/bootstrap.flatly.min.css" type="text/css"/>

    <!-- Font Awesome and Google Fonts -->
    <link href="http://jeffskinnerbox.me/theme/css/font-awesome.min.css" rel="stylesheet">
    <link href='http://fonts.googleapis.com/css?family=Knewave' rel='stylesheet' type='text/css'>

    <link href="http://jeffskinnerbox.me/theme/css/pygments/native.css" rel="stylesheet">
        <link href="http://jeffskinnerbox.me/theme/css/typogrify.css" rel="stylesheet">
    <link rel="stylesheet" href="http://jeffskinnerbox.me/theme/css/style.css" type="text/css"/>

        <link href="http://jeffskinnerbox.me/feeds/all.atom.xml" type="application/atom+xml" rel="alternate"
              title="Jeff's Skinner Box ATOM Feed"/>
</head>

<body>
<div class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="container">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-ex1-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a href="http://jeffskinnerbox.me/" style="font-family: Knewave, cursive; font-size: 48px; color: #FFFFFF">
Jeff's Skinner Box&nbsp;            </a>
        </div>
        <div class="collapse navbar-collapse navbar-ex1-collapse">
            <ul class="nav navbar-nav">
                         <li><a href="http://jeffskinnerbox.me/pages/about-me.html">
                             About&nbsp;Me
                          </a></li>
                    <li><a href="/index.html">Blog</a></li>
                    <li><a href="/pages/open-notebook.html">Open Notebook</a></li>
            </ul>
            <ul class="nav navbar-nav navbar-right">
                <li><a href="http://jeffskinnerbox.me/archives.html"><i class="fa fa-th-list"></i><span class="icon-label">Archives</span></a></li>
            </ul>
        </div>
        <!-- /.navbar-collapse -->
    </div>
<!-- GitHub Ribbon - https://github.com/blog/273-github-ribbons -->
<a href="https://github.com/jeffskinnerbox/jeffskinnerbox.github.io/tree/source" target="_blank">
    <img style="position: absolute; top: 0; left: 0; border: 0;" src="https://github-camo.global.ssl.fastly.net/82b228a3648bf44fc1163ef44c62fcc60081495e/68747470733a2f2f73332e616d617a6f6e6177732e636f6d2f6769746875622f726962626f6e732f666f726b6d655f6c6566745f7265645f6161303030302e706e67" alt="Fork me on GitHub" data-canonical-src="https://s3.amazonaws.com/github/ribbons/forkme_left_red_aa0000.png">
</a>       <!-- GitHub Ribbon - https://github.com/blog/273-github-ribbons -->
</div> <!-- /.navbar -->

<div class="container">
    <div class="row">
        <div class="col-sm-9">

    <section id="content">
        <article>
            <header class="page-header">
                <h1>
                    <a href="http://jeffskinnerbox.me/posts/2013/Jan/30/configuration-utilities-for-xbee-radios/"
                       rel="bookmark"
                       title="Permalink to Configuration Utilities for XBee Radios">
                        Configuration Utilities for XBee&nbsp;Radios
                    </a>
                </h1>
            </header>
            <div class="entry-content">
                <div class="panel">
                    <div class="panel-body">
<footer class="post-info">
    <span class="published">
        <i class="fa fa-calendar"></i><time datetime="2013-01-30T00:01:00"> Wednesday  January 30, 2013</time>
    </span>



&nbsp;&nbsp;&nbsp;
<i class="fa fa-tags fa-lg"></i>
    <a class="btn btn-default btn-xs" href="http://jeffskinnerbox.me/tag/raspberry-pi/">Raspberry Pi</a>
        &nbsp;
    <a class="btn btn-default btn-xs" href="http://jeffskinnerbox.me/tag/xbee/">XBee</a>
    
</footer><!-- /.post-info -->                    </div>
<!-- Repost button -->
<!-- For more information - http://www.repost.us/ -->
<a class='rpuRepostUsButton' href='https://secure.repost.us/syndicate/create'>
    <img alt='Repost This' title='Repost this article to your website' src='http://static.1.rp-api.com/buttons/repostus_bttn_shrt_embed.png'/>
</a>                </div>
                <p><a href="http://jeffskinnerbox.files.wordpress.com/2012/10/xbee-module-series-1-1mw-with-wire-antenna-xb24-awi-001.jpg">
    <img class="img-rounded" style="margin: 0px 8px; float: left" title="XBee Module - Series 1 - 1mW with Wire Antenna - XB24-AWI-001" alt="XBee Series 1" src="/images/xbee-module-series-1-1mw-with-wire-antenna-xb24-awi-001.jpg" width="20%" height="20%" />
</a>
My ultimate aim is to wirelessly network several Arduino based platforms with a centralized Raspberry Pi controller. There is much for me to learn to get this operational, not the least of which is the radio device I plan to use, the Xbee.  To get up to speed on the Xbee, I found the tutorials at <a href="http://www.ladyada.net/make/xbee/index.html">Adafruit</a>, <a href="https://www.sparkfun.com/pages/xbee_guide">Sparkfun</a>, and <a href="http://www.parallax.com/portals/0/downloads/docs/prod/book/122-32450-xbeetutorial-v1.0.pdf">Parallax</a> helpful.   More detailed references are listed at the end of this post, but the very first challenge is to configure the XBee radios for operation.  This post provides insight on how this can be done, and my main mission, create a few simple utilities that make that job&nbsp;easy.</p></p>
<h2>Xbee&nbsp;Radios</h2>

<p>I purchased two XBee Series 1 Module (Freescale 802.15.4 firmware) from <a href="https://www.adafruit.com/products/128">Adafruit</a>.  These are manufactured by Digi and are low-power module with wire antenna  (<a href="http://www.digi.com/products/wireless-wired-embedded-solutions/zigbee-rf-modules/point-multipoint-rfmodules/xbee-series1-module#models"><span class="caps">XB24</span>-<span class="caps">AWI</span>-001</a>).  They have a 250 kbps <span class="caps">RF</span> data rates and operate at 2.4 GHz.  These radios use the <span class="caps">IEEE</span> 802.15.4 networking protocol and can perform point-to-multi-point or <a href="http://en.wikipedia.org/wiki/Peer-to-peer">peer-to-peer</a> networking , but as configured here, they do not <a href="http://en.wikipedia.org/wiki/Mesh_networking">mesh</a>.  The Digi models that handle meshing are Digimesh, ZNet2.5 and Zigbee (<span class="caps">ZB</span>).  <a href="http://www.digi.com/technology/digimesh/">Digimesh</a> is a version of firmware that runs on Series 1 hardware. So, if you choose to, you can <a href="http://www.libelium.com/development/waspmote/tutorial0002">upgrade</a> these modules to Digimesh firmware to get meshing.
<h2>Xbee Adapter&nbsp;Board</h2>
Along with the XBee radios, I purchased adapter boards designed to make it easier to work with the radios. The adopter provides on-board 3.3V regulator power from a 5 volt source, voltage level shifting circuitry so you can connect  5V circuitry to the XBee, commonly used pins are brought out along the edge (making it easy to breadboard), and engineered to be interface via <span class="caps">FTDI</span> cable to a computer via <span class="caps">USB</span>.  The<a href="http://www.ladyada.net/make/xbee/wiring.html"> image and the text</a> below describe the pin-out for the <a href="https://www.adafruit.com/products/126">Adafruit  XBee Adapter</a>:</p>
<p><center>
<a href="http://jeffskinnerbox.files.wordpress.com/2012/10/xbee-pinout.jpg">
    <img class="size-full wp-image-418" title="Xbee Pin Out" alt="XBee Pinout" src="/images/xbee-pinout.jpg" width="545" height="333" />
</a> 
</center>
<ol>
<ol>
    <li><strong>3V pin</strong> - This is either an input power pin (if 5V is not provided) or an output from the 250mA regulator if 5V is&nbsp;provided</li>
    <li><strong><span class="caps">DTR</span></strong> - &#8220;Data terminal ready&#8221;  is a flow control pin used to tell the XBee that the microcontroller or computer host is ready to&nbsp;communicate.</li>
    <li><strong><span class="caps">RST</span></strong> - &#8220;Reset&#8221;  pin can be used to reset the XBee.  By default it is pulled high by the 10K resistor under the module. To reset, pull this pin&nbsp;low.&#8217;</li>
    <li><strong>Ground</strong> - common ground for power and&nbsp;signal</li>
    <li><strong><span class="caps">CTS</span></strong> - &#8220;Clear to Send&#8221; this is a flow control pin that can be used to determine if there is data in the XBee input buffer ready to be&nbsp;read</li>
    <li><strong>5V</strong> - This is the power input pin into the 3.3V regulator. Provide up to 6V that will be linearly converted into&nbsp;3.3V</li>
    <li><strong><span class="caps">RX</span></strong> - &#8220;Receive Data&#8221; is the XBee&#8217;s serial recieve pin. Serial data is sent on this pin <strong>into</strong> the XBee to be transmitted&nbsp;wirelessly</li>
    <li><strong><span class="caps">TX</span></strong> - &#8220;Transmit Data&#8221; is the XBee&#8217;s serial transmit pin. Serial data is sent on this pin <strong>out of</strong> the XBee, after it has been transmitted wirelessly from another&nbsp;module</li>
    <li><strong><span class="caps">RTS</span></strong> - &#8220;Ready to Send&#8221; is a flow control pin that can be used to tell the XBee to signal that the computer or microcontroller needs a break from reading serial&nbsp;data.</li>
    <li>see pin&nbsp;#1</li>
</ol>
</ol>
<a href="http://www.ladyada.net/make/xbee/configure.html">
    <img class="img-rounded" style="margin: 0px 8px; float: left" title="Xbee Adaptor connected with USB FTDI TTL-232 Cable" alt="XBee Adaptor" src="/images/xbee_ftdi_powered.jpg" width="20%" height="10%" />
</a> 
The <span class="caps">DTR</span>, <span class="caps">RTS</span>, <span class="caps">RST</span> and <span class="caps">RX</span> pins (going <em>into</em> the XBee) pass through a level converter chip that brings the levels to 3.3V. Adafruit claims you can use pretty much anywhere between 2.7 to 5.5V data to communicate with the XBee. The breakout pins on the bottom of the board are not level shifted and you should try to keep data going directly into the XBee pin under&nbsp;3.3V</p>
<h2>XBee Initial Configuration and&nbsp;Testing</h2>

<p>You need a way to communicate withe the Xbee, via it adapter,  to set it up.  This can be done via Adafruit&#8217;s  <a href="http://www.adafruit.com/products/70"><span class="caps">USB</span> <span class="caps">FTDI</span> <span class="caps">TTL</span>-232 Cable</a>, and the <a href="http://www.digi.com/support/productdetail?pid=3352">Digi X-<span class="caps">CTU</span></a> serial terminal program.  By the way, the <a href="ftp://ftp1.digi.com/support/documentation/90001003_a.pdf">X-<span class="caps">CTU</span> user guide</a> describes the many more things it can do beyond the configuration shown here.
<ol>
<ol>
    <li>Plug in the <span class="caps">USB</span> <span class="caps">FTDI</span> <span class="caps">TTL</span>-232 Cable into a <span class="caps">PC</span> <span class="caps">USB</span> port.  If drivers are not installed automatically (it didn&#8217;t for me), follow the steps at the <a href="http://www.ftdichip.com/Drivers/VCP.htm"><span class="caps">FTDI</span> site</a>.</li>
    <li>Download the X-<span class="caps">CTU</span>, double click on the executable file, and follow the instructions to install the&nbsp;program.</li>
    <li>Now connect the <span class="caps">USB</span> <span class="caps">FTDI</span> <span class="caps">TTL</span>-232 Cable to the Xbee Adapter as shown in the picture to the right and insert the <span class="caps">USB</span> end of the cable to you <span class="caps">PC</span>.  Start the X-<span class="caps">CTU</span>.</li>
    <li>To connect, configure and upgrading the Xbee, follow the Adafruit <a href="http://www.ladyada.net/make/xbee/configure.html">instructions</a> for the Xbee Adapter board. Note that if you follow the instructions (I didn&#8217;t - I kept it at 9600 baud), the modem&#8217;s serial interface is now set to 19,200 baud, not the default 9600 used by X-<span class="caps">CTU</span>.  Remember this next time you use X-<span class="caps">CTU</span> with this&nbsp;Xbee.</li>
    <li>If your instructed by X-<span class="caps">CTU</span> to reset the Xbee, you can do this by shorting the reset pin, <span class="caps">RST</span> pin,  to&nbsp;ground.</li>
</ol>
</ol>
The configuration can be touchy, it can go badly, or not at all.  In my case, I seem to have one Xbee Adapter that can reliably perform a firmware upgrade but the other one took some time due to a lose fitting between the Adaptor and  Xbee.  If you run into configuration problems, check out these sites: <a href="http://www.digi.com/wiki/developer/index.php/Bootloader_to_force_XBee_reflash">Using <span class="caps">XCTU</span> to Invoke the Bootloader</a>, <a href="http://www.jsjf.demon.co.uk/xbee/faq.pdf">The Unofficial XBee <span class="caps">FAQ</span></a>,  <a href="http://www.youtube.com/watch?feature=player_detailpage&amp;v=fxOqQZD-oaM">How to recover from a failed firmware upgrade</a>.
<h2>Quickly Getting the Xbee&#8217;s&nbsp;Communicating</h2>
The next step for me was just do a basic test of getting two XBee device communicating with each other. This is just a sanity test to see evidence of communication between the devices. Basically, I just followed the <a href="http://www.ladyada.net/make/xbee/point2point.html">instructions</a> provided by Adafruit.
<center>
<a href="http://jeffskinnerbox.wordpress.com/2013/01/30/configuration-utilities-for-xbee-radios/simple-test/" rel="attachment wp-att-942"><img class=" wp-image-942 alignright" alt="simple test" src="http://jeffskinnerbox.files.wordpress.com/2012/12/simple-test.jpg" width="327" height="245" /></a>
</center>
<ol>
<ol>
    <li>Using the X-<span class="caps">CTU</span>, set the <span class="caps">PAN</span> <span class="caps">ID</span> to the same value on the two&nbsp;Xbee&#8217;s.</li>
    <li>Select an Ardunio that has been programmed to send repeated brief messages to its serial port.  I used the standard <span class="caps">LED</span> <a href="http://arduino.cc/en/Tutorial/Blink">Blinking sketch</a> but put in some write statements in the&nbsp;loop.</li>
    <li>Using an Arduino and breadboard, connect +5V and ground to provide power. Make sure the XBee&#8217;s <span class="caps">LED</span> is&nbsp;blinking.</li>
    <li>Connect the <span class="caps">RX</span> line (input) of the XBee to the <span class="caps">TX</span> line (output) of the Arduino. Connect the <span class="caps">RX</span> line (input) of the Arduino to the <span class="caps">TX</span> line (output) of the Xbee. Plug the Arduino into your <span class="caps">PC</span>&#8217;s serial&nbsp;port.</li>
    <li>Now take the second Xbee and connect the  <span class="caps">USB</span> <span class="caps">FTDI</span> <span class="caps">TTL</span>-232 Cable to the Xbee and the <span class="caps">PC</span>.  The cable is doing nothing but appling power to the&nbsp;Xbee.</li>
    <li>Now you should see the receive <span class="caps">LED</span> periodically light on the <span class="caps">USB</span> <span class="caps">FTDI</span> <span class="caps">TTL</span>-232&nbsp;Cable tethered Xbee.</li>
    <li>You now got proof that the two Xbee&#8217;s are communicating.  The Arduino connected Xbee is sending data to its serial port and the <span class="caps">USB</span> <span class="caps">FTDI</span> <span class="caps">TTL</span>-232 Cable tethered Xbee&nbsp;is receiving it.</li>
</ol>
</ol>
Above you&#8217;ll find a picture of the configuration, and below is the Arduino sketch I&nbsp;used.</p>
<div class="codehilite" style="background: #f0f3f3"><pre style="line-height: 125%"><span style="color: #0099FF; font-style: italic">/*</span>
<span style="color: #0099FF; font-style: italic"> *  Xbee Test via Blink LED</span>
<span style="color: #0099FF; font-style: italic"> *</span>
<span style="color: #0099FF; font-style: italic"> *Turns on an LED on for one second, then off for one second, repeatedly.</span>
<span style="color: #0099FF; font-style: italic"> *Also increase brigthness of analog LED.</span>
<span style="color: #0099FF; font-style: italic"> *</span>
<span style="color: #0099FF; font-style: italic"> *The circuit:</span>
<span style="color: #0099FF; font-style: italic"> * LED1 connected from digital pin 13 to ground.</span>
<span style="color: #0099FF; font-style: italic"> * LED2 connected from analog pin 9 to ground.</span>
<span style="color: #0099FF; font-style: italic"> * Note: On most Arduino boards, there is already an LED on the board</span>
<span style="color: #0099FF; font-style: italic"> * connected to pin 13, so you don&#39;t need any extra components for this example.</span>

<span style="color: #0099FF; font-style: italic"> *Created 1 June 2005</span>
<span style="color: #0099FF; font-style: italic"> *By David Cuartielles</span>
<span style="color: #0099FF; font-style: italic"> *http://arduino.cc/en/Tutorial/Blink</span>
<span style="color: #0099FF; font-style: italic"> *based on an orginal by H. Barragan for the Wiring i/o board</span>
<span style="color: #0099FF; font-style: italic"> *Modified by Jeff Irland in December 2012</span>
<span style="color: #0099FF; font-style: italic"> */</span>

<span style="color: #007788; font-weight: bold">int</span> ledPin1 <span style="color: #555555">=</span>  <span style="color: #FF6600">13</span>;    <span style="color: #0099FF; font-style: italic">// LED connected to digital pin 13</span>
<span style="color: #007788; font-weight: bold">int</span> ledPin2 <span style="color: #555555">=</span>  <span style="color: #FF6600">9</span>;     <span style="color: #0099FF; font-style: italic">// LED connected to analog pin 9</span>
<span style="color: #007788; font-weight: bold">int</span> brightness <span style="color: #555555">=</span> <span style="color: #FF6600">0</span>;

<span style="color: #0099FF; font-style: italic">// The setup() method runs once, when the sketch starts</span>
<span style="color: #007788; font-weight: bold">void</span> <span style="color: #CC00FF">setup</span>()   {
    Serial.begin(<span style="color: #FF6600">9600</span>);
    pinMode(ledPin1, OUTPUT);     <span style="color: #0099FF; font-style: italic">// initialize the digital pin as an output</span>
    Serial.println(<span style="color: #555555">&amp;</span>quot;Arduino done with setup()<span style="color: #555555">&amp;</span>quot;);
}

<span style="color: #0099FF; font-style: italic">// the loop() method runs over and over again,</span>
<span style="color: #0099FF; font-style: italic">// as long as the Arduino has power</span>
<span style="color: #007788; font-weight: bold">void</span> <span style="color: #CC00FF">loop</span>()
{
    digitalWrite(ledPin1, HIGH);   <span style="color: #0099FF; font-style: italic">// set the LED on</span>
    Serial.println(<span style="color: #555555">&amp;</span>quot;LED set HIGH.<span style="color: #555555">&amp;</span>quot;);
    delay(<span style="color: #FF6600">1000</span>);                   <span style="color: #0099FF; font-style: italic">// wait for a second</span>

    digitalWrite(ledPin1, LOW);    <span style="color: #0099FF; font-style: italic">// set the LED off</span>
    Serial.println(<span style="color: #555555">&amp;</span>quot;LED set LOW.<span style="color: #555555">&amp;</span>quot;);
    delay(<span style="color: #FF6600">1000</span>);                   <span style="color: #0099FF; font-style: italic">// wait for a second</span>

    brightness <span style="color: #555555">=</span> brightness <span style="color: #555555">+</span> <span style="color: #FF6600">5</span>;
    analogWrite(ledPin2, brightness);
    Serial.println(<span style="color: #555555">&amp;</span>quot;LED brightness increased.<span style="color: #555555">&amp;</span>quot;);
}
</pre></div>


<h2>Installing XBee Python Tools for the&nbsp;RPi</h2>

<p>While the <span class="caps">MS</span> Windows based Digi X-<span class="caps">CTU</span> tool is just fine, I want to use the RPi&#8217;s and Python to access the XBee serial communication <span class="caps">API</span>, and its advanced features, for one or more XBee devices.  I prefer simple utilities, that can be scripted within the Linux shell.  Call me a Linux snob if you wish, but I don&#8217;t care for <span class="caps">MS</span>&nbsp;Windows!</p>
<p>In my post &#8220;<a href="http://jeffskinnerbox.wordpress.com/2012/12/22/selecting-xbee-radios-and-supporting-softwaretools/">Selecting XBee Radios and Supporting Software Tools</a>&#8220;, I referenced a Python package that could be used to create my utilitiesd, call python-xbee, and I will be using it here. It claims to provides a semi-complete implementation of the XBee binary <span class="caps">API</span> protocol and allows a developer to send and receive the information they desire without dealing with the raw communication details. It also claims the  library is compatible with both XBee 802.15.4 (Series 1) and XBee ZigBee (Series 2) modules, normal and <span class="caps">PRO</span>.</p>
<p>First, we need to load some additional required Python Packages, that being <a href="http://pyserial.sourceforge.net/">pySerial</a> and <a href="https://nose.readthedocs.org/en/latest/">Nose</a>. pySerial extends python&#8217;s capabilities to include interacting with a serial port and Nose is a package providing a very easy way to build tests, based on the Python class <a href="http://docs.python.org/2/library/unittest.html">unittest</a>.  (Don&#8217;t let this all scare you away, these are necessary but your not going to use them directly).  To load these package:
<p style="padding-left:30px;"><code>sudo pip install pySerial
sudo pip install nose</code></p>
Download the python-xbee tools from <a href="http://code.google.com/p/python-xbee/">Google Code</a> or <a href="http://pypi.python.org/pypi/XBee/2.0.0">Python Org</a> and place them into the RPi&#8217;s $<span class="caps">HOME</span>/src.  The <span class="caps">README</span> file provides installation instructions.  It states that the following command automatically test and install the package for you:
<p style="padding-left:30px;"><code>sudo python setup.py install</code></p>
There is a simple to use RPi platform tool that I have modified for my needs, that is a XBee serial command shell for interacting with XBee radios.  It performs the core functions of the official configuration tool, <a href="https://sites.google.com/site/xbeetutorial/xctu">X-<span class="caps">CTU</span></a>, which only runs on Windows. (There happens to be a cross-platform version of X-<span class="caps">CTU</span> called <a href="http://www.moltosenso.com/client/fe/browser.php?pc=/client/fe/download.php">moltosenso Network Manager</a> but I don&#8217;t need all this horse power.)  I&#8217;ll use this X-<span class="caps">CTU</span>-alternative to configure the individual XBee radios.  With the X-<span class="caps">CTU</span>, you can update firmware, etc. but most of the time you need the program to do simple configuration tasks. You could use Linux&#8217;s <a href="http://linux.die.net/man/1/minicom"><code>minicom</code></a>, but I prefer a simpler tool which can be scripted so I can configure several XBee radios identically.  I found much of what I wanted in an existing <a href="https://github.com/sensestage/xbee-tools">Python XBee tools for configuration</a>.  I made some modification/improvements, I call it the XBeeTerm, and its listed&nbsp;below:</p>
<p><script src="https://gist.github.com/jeffskinnerbox/6663016.js"></script></p>

<p>The XBeeTerm.py module imports functions from the pretty.py package, specifically to colorize the output for xterm on the Raspberry Pi.  This package is provided&nbsp;here:</p>
<p><script src="https://gist.github.com/jeffskinnerbox/6663095.js"></script></p>

<h2>Identifying the RPi <span class="caps">USB</span> device used by the&nbsp;XBee</h2>

<p>Since the python-xbee library wants to talk to the via a Linux serial devices, I&#8217;m using the <a href="http://www.adafruit.com/products/70"><span class="caps">USB</span> <span class="caps">FTDI</span> <span class="caps">TTL</span>-232 Cable</a> (<a href="http://www.ftdichip.com/"><span class="caps">FTDI</span></a> is the <a href="http://en.wikipedia.org/wiki/Universal_Serial_Bus"><span class="caps">USB</span></a> chip manufacturer) used in the XBee configuration step done earlier.  I connected the cable to the RPi <span class="caps">USB</span> port  and then we need to find the serial tty the cable is associated with.  To do this, it takes a bit of detective work. Run the commands:
<p style="padding-left:30px;"><code>lsusb
dmesg | grep Manufacturer
dmesg | grep FTDI</code></p>
A better command might be (but I&#8217;m not sure it will work every time):
<p style="padding-left:30px;"><code>dmesg | grep -i usb | grep -i tty</code></p>
The interpretation of the output tells us the cable is attached to serial device <code>/dev/ttyUSB0</code>.  See the output&nbsp;below.</p>
<p><a href="http://jeffskinnerbox.wordpress.com/2013/01/30/configuration-utilities-for-xbee-radios/best-use-of-dmesg/" rel="attachment wp-att-1070"><img class="aligncenter size-full wp-image-1070" alt="best use of dmesg" src="http://jeffskinnerbox.files.wordpress.com/2012/12/best-use-of-dmesg.jpg" width="500" height="192" /></a></p>
<p>Another possibility is to use <a href="http://linux.die.net/man/8/udevadm"><code>udevadm</code></a> to gather information about specific devices but I never figured out exactly how to use it to answer my question.  Python also has a package called <a href="http://sourceforge.net/apps/trac/pyusb/">PyUSB</a> that might provide some help, but also here you&#8217;ll still need the vendor and product identification&nbsp;information.</p>
<p>Chances are that when you plug the cable into the same <span class="caps">USB</span> port the next time, it will default to the same tty but there is no certainty.  To assign a permanent tty name to the device, and never do any of this again, check out <a href="http://hintshop.ludvig.co.nz/show/persistent-names-usb-serial-devices/">Persistent names for usb-serial devices</a>.
<h2>Configuring the XBee Radios for <span class="caps">API</span>&nbsp;Mode</h2>
The configuration and testing of the XBee&#8217;s done earlier was done in <span class="caps">AT</span> Command mode (Transparent Mode). In <span class="caps">AT</span> mode, everything sent to the <span class="caps">RX</span> line of the XBee radio will be sent out via the antenna, and all the incoming data from antenna will go to the XBee&#8217;s <span class="caps">TX</span> line.  This is why we could check the sanity of the XBee radios in the earlier section, <strong>XBee Initial Configuration and Testing </strong>using a simple Arduino sketch.  We sent junk to the XBee and it transmitted&nbsp;it!</p>
<p>Now we&#8217;ll configure two XBee radios (with a Coordinator and a single End Device) to form a network using <span class="caps">API</span> Mode.  In <span class="caps">API</span> Mode, XBee won&#8217;t send out anything until it received the correct form of commands from the serial interface.  The <a href="ftp://ftp1.digi.com/support/documentation/90000982_A.pdf">XBee <span class="caps">AT</span> Command Set</a> (page 27), specifically the  <span class="caps">ATAP</span> 2 command, allows you to configure the XBee radio for <span class="caps">API</span> Mode.   So <a href="http://code.google.com/p/xbee-api/wiki/WhyApiMode">why <span class="caps">API</span> Mode</a>, consider the following:
<ul>
<ul>
    <li>When sending a packet, the transmitting radio receives an <span class="caps">ACK</span>, indicating the packet was successfully delivered. The transmitting radio will resend the packet if it does not receive an <span class="caps">ACK</span>.</li>
    <li>Receive packets (<span class="caps">RX</span>), contain the source address of transmitting&nbsp;radio</li>
    <li>You can configure a remote radio with the Remote <span class="caps">AT</span>&nbsp;feature</li>
    <li>Easily address multiple radios and send broadcast <span class="caps">TX</span>&nbsp;packets</li>
    <li>Receive I/O data from 1 or more remote&nbsp;XBees</li>
    <li>Obtain <span class="caps">RSSI</span> (signal strength) of an <span class="caps">RX</span>&nbsp;packet</li>
    <li>Packets include a checksum for data&nbsp;integrity</li>
</ul>
</ul>
The XBeeTerm utility will  easily configure the XBee radios for <span class="caps">API</span> mode and set the appropriate network parameters.  To get a deeper appreciation of configuring the XBee radios, see the References at the end.  For here, I&#8217;ll just run through the steps using the XBeeTerm.py tool and the configuration commands used, documented in file&nbsp;scripts.</p>
<p>Coordinator Configuration File: <code>Config-Coordinator.txt</code></p>
<p><script src="https://gist.github.com/jeffskinnerbox/6663169.js"></script></p>

<p>End Device Configuration File: <code>Config-End-Device.txt</code></p>
<p><script src="https://gist.github.com/jeffskinnerbox/6663187.js"></script></p>

<p>As they stand right now, these files could not be processed by <code>XBeeTerm.py</code> because of the comments (included to make the contents understandable).  To clean this up, the command <code>sed '/^#/d; s/([^$])#.<em>/\1/'</code>will remove all shell type comments from a file and <code>sed 's/[ \t]</em>$//'</code>will remove unneeded white space.  Putting this all together and you can use this to prepare the above files for <code>XBeeTerm.py</code>:</p>
<div class="codehilite" style="background: #f0f3f3"><pre style="line-height: 125%">sed &#39;/^#/d; s/\([^$]\)#.*/\1/&#39; Config-Coordinator.txt | sed &#39;s/[ \t]*$//&#39; &gt; coord.txt
sed &#39;/^#/d; s/\([^$]\)#.*/\1/&#39; Config-End-Device.txt | sed &#39;s/[ \t]*$//&#39; &gt; endd.txt
</pre></div>


<p>Now execute the following <code>python XBeeTerm.py coord.txt</code> and you get the output&nbsp;below:</p>
<p><a href="http://jeffskinnerbox.files.wordpress.com/2013/01/xbeeterm-script.jpg"><img class="aligncenter size-full wp-image-1262" alt="XBeeTerm Script" src="http://jeffskinnerbox.files.wordpress.com/2013/01/xbeeterm-script.jpg" width="500" height="205" /></a></p>
<p>The yellow text is responses back from the XBee serial terminal and the red text is from the XBee radio itself.  Since all the red text is &#8220;<span class="caps">OK</span>&#8221;, all the commands took and the XBee radio is now configured as a Coordinator.  Now repeat this for the End Device XBee&nbsp;radio.</p>
<p>In this example, I have one End Device but what if you have multiple devices, do you need a <code>Config-End-Device.txt </code>file for each end device?  The only change within the configuration file is the radio&#8217;s address, which is established via the <span class="caps">ATMY</span> command.  Here is a trick to avoid the need for multiple files.  First, configure all your End Devices using the configuration file.  Then, for each radio, modify the <span class="caps">ATMY</span> use the&nbsp;following:</p>
<div class="codehilite" style="background: #f0f3f3"><pre style="line-height: 125%">echo -e &quot;baudrate 9600\nserial /dev/ttyUSB0\n+++\nATMY AAA1\nATWR\nATFR\nexit&quot; | python XBeeTerm.py
</pre></div>


<p>but for each End Device radio, increment the <span class="caps">ATMY</span> address by one (e.g. <span class="caps">AAA2</span>, <span class="caps">AAA3</span>, &#8230;).
<h2>Querying XBee for&nbsp;Configuration</h2>
Now that we believe the XBee radios are properly configured, lets verify that by query the radios.  You could use XBeeTerm to perform this function by including only the <span class="caps">AT</span> Command without the parameter but I wanted a more informative tool. For this, I have created another utility that can take a list of <span class="caps">AT</span> Commands as arguments and query the XBee radio for the <span class="caps">AT</span>&#8217;s parameter value.  This utility, call <code>XBeeQuery.py</code>, is listed&nbsp;below:</p>
<p><script src="https://gist.github.com/jeffskinnerbox/6663248.js"></script></p>

<p>Here is a sample output for the XBeeQuery&nbsp;utility:</p>
<p><a href="http://jeffskinnerbox.files.wordpress.com/2013/01/xbeequery-script.jpg"><img class="aligncenter size-full wp-image-1265" alt="XBeeQuery Script" src="http://jeffskinnerbox.files.wordpress.com/2013/01/xbeequery-script.jpg" width="500" height="205" /></a>
<h2>References</h2>
Configuring the XBee Radios
<ul>
<ul>
    <li><a href="http://www.digi.com/support/kbase/kbaseresultdetl?id=2184">What is <span class="caps">API</span> (Application Programming Interface) Mode and how does it&nbsp;work?</a></li>
    <li><a href="http://docs.sensestage.eu/change-to-using-the-api-mode-of-the-xbees">Change to using the <span class="caps">API</span> mode of the&nbsp;XBees</a></li>
    <li><a href="http://www.instructables.com/id/Configuring-XBees-for-API-Mode/">Configuring XBees for <span class="caps">API</span>&nbsp;Mode</a></li>
    <li><a href="http://www.circuitsathome.com/mcu/playing-xbee-part-4-api">Playing Xbee. Part 4 – <span class="caps">API</span></a></li>
    <li><a href="http://code.google.com/p/xbee-api/wiki/XBeeConfiguration">XBee&nbsp;Configuration</a></li>
</ul>
</ul>
General Documentation
<ul>
<ul>
    <li>XBee 802.15.4 (Series 1) Module <a href="http://www.digi.com/pdf/ds_xbeemultipointmodules.pdf">Datasheet</a>, <a href="ftp://ftp1.digi.com/support/documentation/90000982_A.pdf">Product&nbsp;Manual</a></li>
</ul>
</ul></p>
            </div>
            <!-- /.entry-content -->
    <hr />
    <section class="comments" id="comments">
        <h2>Comments</h2>
        <div id="disqus_thread"></div>
        <script type="text/javascript">
            /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
            var disqus_shortname = 'jeffskinnerbox'; // required: replace example with your forum shortname
            var disqus_identifier = 'configuration-utilities-for-xbee-radios';
            var disqus_url = 'http://jeffskinnerbox.me/posts/2013/Jan/30/configuration-utilities-for-xbee-radios/';
            var disqus_config = function () {
                this.language = "en";
            };

            /* * * DON'T EDIT BELOW THIS LINE * * */
            (function () {
                var dsq = document.createElement('script');
                dsq.type = 'text/javascript';
                dsq.async = true;
                dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
                (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
            })();
        </script>
        <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by
            Disqus.</a></noscript>
        <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>

    </section>
        </article>
    </section>

        </div>
        <div class="col-sm-3 well well-sm" id="sidebar">

<aside>
    <section>
        <ul class="list-group list-group-flush">
                <div style="text-align: center;">
                    <h3><a href="http://jeffskinnerbox.me/pages/about-me.html" style="font-family: Knewave, cursive; font-size: 18;">My Electronics Projects And Other Diversions</a>
                    <img class="img-rounded" src="http://jeffskinnerbox.me/extra/frustrated-engineer.jpg" alt="Side Bar Picture" height="100%" width="100%">
                </div>

            <li class="list-group-item"><a href="http://jeffskinnerbox.me/categories.html"><h4><i class="fa fa-folder-open fa-lg"></i><span class="icon-label">Categories</span></h4></a>
            </li>

            <li class="list-group-item"><a href="http://jeffskinnerbox.me/tags.html"><h4><i class="fa fa-tags fa-lg"></i><span class="icon-label">Tags</span></h4></a>
            </li>    

            <li class="list-group-item"><a href="http://jeffskinnerbox.me/index.html"><h4><i class="fa fa-file-text fa-lg"></i><span class="icon-label">Recent Posts</span></h4></a>
            </li>

            <li class="list-group-item"><a href="http://jeffskinnerbox.me/pages/open-notebook.html"><h4><i class="fa fa-book fa-lg"></i><span class="icon-label">Open Notebook</span></h4></a>

            <li class="list-group-item"><h4><i class="fa fa-external-link-square fa-lg"></i><span class="icon-label">Links</span></h4>
                <ul class="list-group" id="links">
                    <li class="list-group-item">
                        <a href="/pages/scratch-pad.html" target="_blank">
                            Scratch Pad
                        </a>
                    </li>
                    <li class="list-group-item">
                        <a href="/pages/linux-python-packages-for-my-raspberry-pi.html" target="_blank">
                            RPi Packages
                        </a>
                    </li>
                    <li class="list-group-item">
                        <a href="/pages/reference-page.html" target="_blank">
                            Reference Page
                        </a>
                    </li>
                    <li class="list-group-item">
                        <a href="/pages/vim-cheat-sheet.html" target="_blank">
                            Vim Cheat Sheet
                        </a>
                    </li>
                </ul>
                </li>

                <li class="list-group-item"><h4><i class="fa fa-group fa-lg"></i><span class="icon-label">Social Media</span></h4>
                  <ul class="list-group" id="social">
                    <li class="list-group-item"><a href="https://github.com/jeffskinnerbox" target="_blank"><i
                            class="fa fa-github-square fa-lg"></i> Github
                    </a></li>
                    <li class="list-group-item"><a href="https://twitter.com/jeffskinnerbox" target="_blank"><i
                            class="fa fa-twitter-square fa-lg"></i> Twitter
                    </a></li>
                    <li class="list-group-item"><a href="https://linkedin.com/in/jeffreyirland" target="_blank"><i
                            class="fa fa-linkedin-square fa-lg"></i> Linkedin
                    </a></li>
                    <li class="list-group-item"><a href="http://jeffskinnerbox.me/feeds/all.atom.xml" target="_blank"><i
                            class="fa fa-rss-square fa-lg"></i> RSS
                    </a></li>
                  </ul>
            </li>

            <li class="list-group-item"><a href="http://jeffskinnerbox.me/pages/this-blog-is-powered-by.html"><h4><i class="fa fa-rocket fa-lg"></i><span class="icon-label">This Blog Powered By</span></h4></a>

        </ul>
    </section>

</aside>        </div>
    </div>
</div>
<footer>
   <div class="container">
      <hr>
      <div class="row">
         <div class="col-xs-10">This Blog Powered By 
            <a href="http://docs.getpelican.com/" target="_blank">Pelican</a>,
            <a href="http://getbootstrap.com" target="_blank">Bootstrap</a>, And
            <a href="/pages/this-blog-is-powered-by.html" target="_blank">Other Things</a>.
            <p>
            <a href="http://opensource.org/">
                <img src="/images/logos/open_source_logo.png" alt="Open Source Logo" title="The Open Source Initiative (OSI) is a non-profit corporation with global scope formed to educate about and advocate for the benefits of open source, and to build bridges among different constituencies in the open source community. The OSI maintains the Open Source Definition and the list of Open Source Initiative-approved licenses." height="40px" width="40px">
            </a>
            <small>
                All my work is
                <a href="http://opensource.org/licenses/MIT/" target="_blank">MIT licensed, Open, and Free</a>,
                except where indicated otherwise.
            </small>
            </p>
         </div>
         <div class="col-xs-2"><p class="pull-right"><i class="fa fa-arrow-up"></i> <a href="#">Back to top</a></p></div>
      </div>
   </div>
</footer>
<script src="http://code.jquery.com/jquery.js"></script>

<!-- Include all compiled plugins (below), or include individual files as needed -->
<script src="http://jeffskinnerbox.me/theme/js/bootstrap.min.js"></script>

<!-- Enable responsive features in IE8 with Respond.js (https://github.com/scottjehl/Respond) -->
<script src="http://jeffskinnerbox.me/theme/js/respond.min.js"></script>

    <script type="text/javascript">
        $(document).ready(function () {
            if (!window.jXHR) {
                var jxhr = document.createElement('script');
                jxhr.type = 'text/javascript';
                jxhr.src = 'http://jeffskinnerbox.me/theme/js/jXHR.js';
                var s = document.getElementsByTagName('script')[0];
                s.parentNode.insertBefore(jxhr, s);
            }

            github.showRepos({
                user: 'jeffskinnerbox',
                count: 5,
                skip_forks: false,
                target: '#gh_repos'
            });
        });
    </script>
    <script src="http://jeffskinnerbox.me/theme/js/github.js" type="text/javascript"></script>
    <script type="text/javascript">
        /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
        var disqus_shortname = 'jeffskinnerbox'; // required: replace example with your forum shortname

        /* * * DON'T EDIT BELOW THIS LINE * * */
        (function () {
            var s = document.createElement('script');
            s.async = true;
            s.type = 'text/javascript';
            s.src = '//' + disqus_shortname + '.disqus.com/count.js';
            (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
        }());
    </script>
    <script type="text/javascript">

        var _gaq = _gaq || [];
        _gaq.push(['_setAccount', 'UA-43272292-1']);
        _gaq.push(['_trackPageview']);

        (function () {
            var ga = document.createElement('script');
            ga.type = 'text/javascript';
            ga.async = true;
            ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(ga, s);
        })();

    </script>
</body>
</html>